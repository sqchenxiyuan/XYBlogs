# 函数封装之数组去重

数组去重是编程中十分重要的方法，这篇文章将介绍多个数组去重的方法。

## JS的数组去重

数组去重，顾名思义是要将数组中的重复数值去除，所以数值比对我们都需要使用 `===` 运算符。

然而去重我们还需要一些注意东西:

1. `NaN===NaN` 为 `false`
    在去重时，我们应该是希望 `NaN` 是只保留一个，所以 `NaN` 需要做额外判断。

## 双重循环去重

数组去重一般最先想到的可能就是双循环去重，建立一个新数组，将没有重复的放到新数组中，循环比较。

``` javascript

function unique_2loop(arr){//最简单的双循环去重
  var i,j;
  var result=[];
  var l=arr.length;
  loop1:
  for(i=0;i<l;i++){
    var rl=result.length;

    for(j=0;j<rl;j++){
      if(arr[i]===result[j]||typeof arr[i] ==='number' && typeof result[i] ==='number' && isNaN(arr[i])&&isNaN(result[i])){
        continue loop1;
      }
    }
    result.push(arr[i]);
  }
  return result;
}

```

这样看起来我们可能觉的有点复杂，第二重循环我们用 `indexOf` 可以去掉这样代码更加直观。

``` javascript

function unique_2loop_indexOf(arr){
  var result=[];
  var l=arr.length;
  var haveNaN=false;//标记是否有了NaN

  for(var i=0;i<l;i++){
    var rl=result.length;

    if(result.indexOf(arr[i])===-1||typeof arr[i] ==='number' && isNaN(arr[i]) && !haveNaN){
      if(!haveNaN&&isNaN(data))haveNaN=true;
      result.push(arr[i]);
    }
  }

  return result;
}

```

甚至是

``` javascript

function unique_2loop_indexOf_forEach(arr){
  var result = [];
  var haveNaN=false;//标记是否有了NaN

  arr.forEach((data)=>{
    if(result.indexOf(data)===-1||typeof data ==='number' && isNaN(data) && !haveNaN){
      if(!haveNaN&&isNaN(data))haveNaN=true;
      result.push(data);
    }
  });

  return result;
}

```

但是这些方法，由于采用了双重循环，当处理大数据时耗时特别长，所以只能用来处理一些较小的数组。

## Hash表快速去重

双重循环去重的时间较长，而快速提升去重速度的方法大都是采用构建Hash标的方式。

比如

``` javascript

function unique_hash(arr){
  var result = [];
  var haveNaN=false;//标记是否有了NaN

  arr.forEach((data)=>{
    if(result.indexOf(data)===-1||typeof data ==='number' && isNaN(data) && !haveNaN){
      if(!haveNaN&&isNaN(data))haveNaN=true;
      result.push(data);
    }
  });

  return result;
}

```

## END

> 2017-2-20 立项
